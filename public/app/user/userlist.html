<div class="view-wrapper">
    <ul ng-if="regionStats.length" style="margin-top: 0">
        <li ng-repeat="stat in regionStats" style="display: inline-block;margin-right:20px">
            <a ui-sref="user.list.region({regionName: stat.region})">{{stat.region.toUpperCase()}} ({{stat.count}})</a>
        </li>
    </ul>
    <input type="text" id="game-search" placeholder="Sök i alla regioner" ng-model="q" ng-change="search()" ng-minlength="3" />
    <h3 style="margin: 0 5px" ng-if="showQ">{{games.length}} spel hittades</h3>
    <ul id="games">
        <li ng-repeat="game in games" ng-if="!game.isRemoved" ng-class-odd="'odd'" ng-class-even="'even'">
            <div class="master-wrapper">
                <a ng-class="{complete: game.attr.isComplete}" ui-sref="game({consoleName:consoleName, regionName:currentRegion.region.id, subRegionName:currentRegion.subregion.id, gameName:game.name.split(' ').join('-')})">
                    <div class="game-name">
                        <span>
                            {{game.name}}
                            <span>({{game.regions.sub[0].toUpperCase()}})</span>
                        </span>
                    </div></a><a href ng-click="editGame(game)" ng-class="{disabled: !$parent.loggedIn}"><div class="game-data"><div class="game-attr">
                            <div class="common">
                                <span ng-repeat="attr in game.attr.common" ng-class="{exists: attr.status}">{{attr.id.toUpperCase()}}</span>
                            </div><span ng-if="game.attr.extras.length" ng-class="{exists: game.attr.extrasComplete}">+</span>
                        </div><div class="game-note">
                            <span>{{game.attr.note || '&nbsp;'}}</span></div></div></a>
            </div>
            <div class="game-content" ng-if="game.id === selected.id">
                <form name="gameEditor">
                    <ul>
                        <li ng-repeat="attr in selected.attr.common" style="padding: 0; display: inline; margin-right: 20px">
                            <label style="font-size: 30px" for="{{selected.id + '_' + attr.id}}">{{attr.longName}}:</label>
                            <input id="{{selected.id + '_' + attr.id}}" type="checkbox" ng-model="attr.status" ng-checked="attr.status" ng-change="attrChanged(selected.attr.common)">
                        </li>
                    </ul>
                    <ul ng-if="selected.attr.extras.length">
                        <li ng-repeat="attr in selected.attr.extras" style="padding: 0; display: inline; margin-right: 20px">
                            <label style="font-size: 30px; color: #6495ed" for="{{selected.id + '_' + attr.id}}">{{attr.longName}}:</label>
                            <input id="{{selected.id + '_' + attr.id}}" type="checkbox" ng-model="attr.status" ng-checked="attr.status">
                        </li>
                    </ul>
                    <div>
                        <label style="font-size: 30px" for="{{game.id + '_note'}}">Anteckning:</label>
                        <input id="{{game.id + '_note'}}" type="text" ng-model="selected.attr.note">
                        <button ng-disabled="!isDirty(game.attr)" class="yeah" ng-click="updateGame(game)">Spara</button>
                        <span ng-if="willRemove">Spelet kommer att tas bort ur din samling.</span>
                    </div>
                </form>
            </div>
        </li>
    </ul>
</div>